{"version":3,"file":"js/152.92c5fffe.js","mappings":"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","sources":["webpack://admin/./src/views/account/add.vue","webpack://admin/./src/views/account/add.vue?b547"],"sourcesContent":["<template>\n    <div class=\"p-account-add\">\n        <h1 v-if=\"!account.id\">创建账号</h1>\n        <el-form :model=\"formData\" :rules=\"rules\" label-width=\"80px\" size=\"large\" ref=\"form\">\n            <!-- <el-form-item label=\"头像\" prop=\"avatar\">\n                <el-upload\n                    class=\"avatar-uploader\"\n                    action=\"https://run.mocky.io/v3/9d059bf9-4660-45f2-925d-ce80ad6c4d15\"\n                    :show-file-list=\"false\"\n                    :on-success=\"handleAvatarSuccess\"\n                    :before-upload=\"beforeAvatarUpload\"\n                >\n                    <img v-if=\"formData.avatar\" :src=\"formData.avatar\" class=\"avatar\" />\n                    <el-icon v-else class=\"avatar-uploader-icon\"><Plus /></el-icon>\n                </el-upload>\n            </el-form-item> -->\n            <el-form-item label=\"账号\" prop=\"username\" required>\n                <el-input\n                    v-model=\"formData.username\"\n                    placeholder=\"请输入登录用户名\"\n                    :disabled=\"!!account.id\"\n                ></el-input>\n            </el-form-item>\n            <el-form-item label=\"密码\" prop=\"password\" required v-if=\"!account.id\">\n                <el-input\n                    v-model=\"formData.password\"\n                    type=\"password\"\n                    :minlength=\"6\"\n                    :maxlength=\"20\"\n                    show-password\n                    placeholder=\"请输入密码\"\n                ></el-input>\n            </el-form-item>\n            <el-form-item label=\"昵称\" prop=\"nickname\" required>\n                <el-input v-model=\"formData.nickname\" placeholder=\"请输入昵称\"></el-input>\n            </el-form-item>\n            <!-- <el-form-item label=\"用户组\" prop=\"group\">\n                <el-select v-model=\"formData.group\" placeholder=\"选择用户组\" disabled style=\"width: 100%\">\n                    <el-option label=\"超管\" :value=\"512\"></el-option>\n                </el-select>\n            </el-form-item> -->\n            <template v-if=\"account.id\">\n                <!-- <el-form-item label=\"状态\" prop=\"status\">\n                    <el-input v-model=\"formData.status\" disabled></el-input>\n                </el-form-item> -->\n                <el-form-item label=\"电话\" prop=\"phone\">\n                    <el-input v-model=\"formData.phone\" placeholder=\"输入电话\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"邮箱\" prop=\"email\">\n                    <el-input v-model=\"formData.email\" placeholder=\"输入邮箱\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"备注\" prop=\"remark\">\n                    <el-input v-model=\"formData.remark\" placeholder=\"输入备注\"></el-input>\n                </el-form-item>\n            </template>\n            <el-form-item class=\"m-form-actions\">\n                <el-button type=\"primary\" @click=\"onSubmit\" :loading=\"processing\">提交</el-button>\n                <el-button @click=\"onCancel\" :disabled=\"processing\">取消</el-button>\n            </el-form-item>\n        </el-form>\n    </div>\n</template>\n\n<script>\nimport { checkUsername, createAccount, updateAccount } from \"@/service/account\";\nimport { omit, pick } from \"lodash\";\nexport default {\n    name: \"AccountAdd\",\n    props: {\n        account: {\n            type: Object,\n            default: () => {\n                return {};\n            },\n        },\n    },\n    data() {\n        return {\n            formData: {\n                username: \"\",\n                password: \"\",\n                nickname: \"\",\n                group: 512,\n                phone: \"\",\n                email: \"\",\n                status: 1,\n                avatar: \"\",\n                remark: \"\",\n            },\n            processing: false,\n        };\n    },\n    computed: {\n        rules() {\n            const rules = {\n                username: [\n                    { required: true, message: \"请输入用户名\", trigger: \"blur\" },\n                    { min: 4, max: 20, message: \"长度在 4 到 20 个字符\", trigger: \"blur\" },\n                    { message: \"用户名已存在\", trigger: \"blur\", validator: this.checkUsername },\n                ],\n                password: [\n                    { required: true, message: \"请输入密码\", trigger: \"blur\" },\n                    { min: 6, max: 20, message: \"长度在 6 到 20 个字符\", trigger: \"blur\" },\n                ],\n                nickname: [\n                    { required: true, message: \"请输入昵称\", trigger: \"blur\" },\n                    { min: 2, max: 20, message: \"长度在 2 到 20 个字符\", trigger: \"blur\" },\n                ],\n                phone: [{ pattern: /^1[3456789]\\d{9}$/, message: \"请输入正确的手机号\", trigger: \"blur\" }],\n                email: [{ type: \"email\", message: \"请输入正确的邮箱地址\", trigger: \"blur\" }],\n            };\n            if (this.account.id) {\n                delete rules.password;\n                delete rules.username;\n            }\n            return rules;\n        },\n    },\n    watch: {\n        account: {\n            immediate: true,\n            deep: true,\n            handler(val) {\n                this.formData = Object.assign({}, this.formData, pick(val, Object.keys(this.formData)));\n            },\n        },\n    },\n    methods: {\n        async checkUsername(rule, val, callback) {\n            try {\n                const params = {\n                    search: val,\n                };\n                if (this.account.id) {\n                    params.id = this.account.id;\n                }\n                const res = await checkUsername(params);\n                if (res.data.data.is_exist) {\n                    callback(new Error(\"用户名已存在\"));\n                } else {\n                    callback();\n                }\n            } catch (error) {\n                callback(new Error(error));\n            }\n        },\n        onCancel() {\n            this.$router.push({ name: \"account-list\" });\n        },\n        onSubmit() {\n            this.$refs.form.validate((valid, fields) => {\n                if (valid) {\n                    this.processing = true;\n                    if (this.account.id) {\n                        const data = omit(this.formData, [\"password\", \"username\"]);\n                        updateAccount(this.account.id, data)\n                            .then(() => {\n                                this.$message.success(\"修改成功\");\n                                this.$router.push({ name: \"account-list\" });\n                            })\n                            .finally(() => {\n                                this.processing = false;\n                            });\n                    } else {\n                        const data = pick(this.formData, [\"username\", \"password\", \"nickname\", \"group\"]);\n                        createAccount(data)\n                            .then(() => {\n                                this.$message.success(\"添加成功\");\n                                this.$router.push({ name: \"account-list\" });\n                            })\n                            .finally(() => {\n                                this.processing = false;\n                            });\n                    }\n                } else {\n                    console.log(\"error submit!!!\", fields);\n                }\n            });\n        },\n    },\n};\n</script>\n\n<style lang=\"less\">\n@import \"~@/assets/css/account/add.less\";\n</style>\n","import { render } from \"./add.vue?vue&type=template&id=0f24407c\"\nimport script from \"./add.vue?vue&type=script&lang=js\"\nexport * from \"./add.vue?vue&type=script&lang=js\"\n\nimport \"./add.vue?vue&type=style&index=0&id=0f24407c&lang=less\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_hoisted_1","$props","account","id","_hoisted_2","_createVNode","_component_el_form","model","$data","formData","rules","$options","size","ref","_component_el_form_item","label","prop","required","_component_el_input","username","$event","placeholder","disabled","_createBlock","password","type","minlength","maxlength","nickname","_Fragment","key","phone","email","remark","_component_el_button","onClick","onSubmit","loading","processing","onCancel","name","props","Object","default","data","group","status","avatar","computed","message","trigger","min","max","validator","this","checkUsername","pattern","watch","immediate","deep","handler","val","assign","pick","keys","methods","rule","callback","params","search","res","is_exist","Error","error","$router","push","$refs","form","validate","valid","fields","omit","updateAccount","then","$message","success","finally","createAccount","console","log","__exports__","render"],"sourceRoot":""}