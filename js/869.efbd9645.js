"use strict";(self["webpackChunkadmin"]=self["webpackChunkadmin"]||[]).push([[869],{2325:function(a,t,e){e.d(t,{HO:function(){return o},Qx:function(){return r},p6:function(){return l}});var n=e(7484),i=e.n(n);function l(a,t="date"){if(a){if("date"===t)return i()(a).format("YYYY-MM-DD");if("time"===t)return i()(a).format("HH:mm:ss");if("datetime"===t)return i()(a).format("YYYY-MM-DD HH:mm:ss")}}function o(a){const t={};for(const e in a)null!==a[e]&&void 0!==a[e]&&""!==a[e]&&(t[e]=a[e]);return t}function r(a){return a||e(6215)}},3869:function(a,t,e){e.r(t),e.d(t,{default:function(){return f}});var n=e(6252),i=e(9963),l=e(3577);const o={class:"p-account-list"},r={class:"m-search"},s={class:"m-table"},p=["src","alt"];function u(a,t,e,u,c,h){const d=(0,n.up)("el-input"),g=(0,n.up)("el-table-column"),m=(0,n.up)("el-button"),f=(0,n.up)("el-table"),w=(0,n.up)("el-pagination"),b=(0,n.Q2)("loading");return(0,n.wg)(),(0,n.iD)("div",o,[(0,n._)("section",r,[(0,n.Wm)(d,{modelValue:c.search,"onUpdate:modelValue":t[0]||(t[0]=a=>c.search=a),placeholder:"从用户名／邮箱／电话／昵称 / 备注中检索",class:"u-input",onKeyup:(0,i.D2)(h.handleSearch,["enter"]),clearable:"",onClear:h.handleSearch},{prepend:(0,n.w5)((()=>[(0,n.Uk)("搜索")])),_:1},8,["modelValue","onKeyup","onClear"])]),(0,n._)("main",s,[(0,n.wy)(((0,n.wg)(),(0,n.j4)(f,{data:c.tableData,stripe:"",border:""},{default:(0,n.w5)((()=>[(0,n.Wm)(g,{label:"用户名",prop:"username","class-name":"u-username"},{default:(0,n.w5)((({row:a})=>[(0,n._)("img",{class:"u-avatar",src:h.avatarUrl(a.avatar),alt:a.username},null,8,p),(0,n._)("span",null,(0,l.zw)(a.username),1)])),_:1}),(0,n.Wm)(g,{label:"昵称",prop:"nickname","show-overflow-tooltip":""}),(0,n.Wm)(g,{label:"电话",prop:"phone","show-overflow-tooltip":""}),(0,n.Wm)(g,{label:"邮箱",prop:"email","show-overflow-tooltip":""}),(0,n.Wm)(g,{label:"备注",prop:"remark","show-overflow-tooltip":""}),(0,n.Wm)(g,{label:"创建时间",prop:"created_at"},{default:(0,n.w5)((({row:a})=>[(0,n._)("span",null,(0,l.zw)(h.formatDate(a.created_at)),1)])),_:1}),(0,n.Wm)(g,{label:"操作",width:"200"},{default:(0,n.w5)((({row:a})=>[(0,n.Wm)(m,{size:"small",type:"primary",onClick:t=>h.handleEdit(a)},{default:(0,n.w5)((()=>[(0,n.Uk)("编辑")])),_:2},1032,["onClick"]),(0,n.Wm)(m,{size:"small",onClick:t=>h.handleDelete(a),type:"danger"},{default:(0,n.w5)((()=>[(0,n.Uk)("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])),[[b,c.loading]]),c.tableData.length?((0,n.wg)(),(0,n.j4)(w,{key:0,currentPage:c.pagination.page,"onUpdate:currentPage":t[1]||(t[1]=a=>c.pagination.page=a),"page-size":c.pagination.limit,"onUpdate:pageSize":t[2]||(t[2]=a=>c.pagination.limit=a),background:"",layout:"prev, pager, next, sizes",total:c.pagination.total,onSizeChange:h.handleSizeChange,onCurrentChange:h.handleCurrentChange,class:"m-pagination"},null,8,["currentPage","page-size","total","onSizeChange","onCurrentChange"])):(0,n.kq)("",!0)])])}e(7658);var c=e(2878),h=e(2325),d={name:"AccountList",data(){return{tableData:[],search:"",pagination:{page:1,limit:10,total:0},loading:!1}},computed:{params(){const a={page:this.pagination.page,limit:this.pagination.limit};return this.search&&(a.search=this.search),a}},mounted(){this.getData()},methods:{handleSizeChange:function(a){this.pagination.limit=a,this.pagination.page=1,this.getData()},handleCurrentChange:function(a){this.pagination.page=a,this.getData()},getData(){this.loading=!0,(0,c.Vo)(this.params).then((a=>{this.tableData=a.data.data.list,this.pagination.total=a.data.data.total})).finally((()=>{this.loading=!1}))},handleSearch(){this.pagination.page=1,this.getData()},handleDelete(a){this.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{(0,c.tm)(a.id).then((()=>{this.$message({type:"success",message:"删除成功!"}),this.pagination.page=1,this.getData()}))}))},handleEdit(a){this.$router.push({name:"account-edit",params:{id:a.id}})},formatDate(a){return(0,h.p6)(a,"datetime")},avatarUrl:h.Qx}},g=e(3744);const m=(0,g.Z)(d,[["render",u]]);var f=m},6215:function(a,t,e){a.exports=e.p+"img/logo.8222117d.svg"}}]);
//# sourceMappingURL=869.efbd9645.js.map