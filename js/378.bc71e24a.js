"use strict";(self["webpackChunkproject"]=self["webpackChunkproject"]||[]).push([[378],{6470:function(e,t,n){var s=n(4155);function i(e){if("string"!==typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function o(e,t){for(var n,s="",i=0,o=-1,a=0,r=0;r<=e.length;++r){if(r<e.length)n=e.charCodeAt(r);else{if(47===n)break;n=47}if(47===n){if(o===r-1||1===a);else if(o!==r-1&&2===a){if(s.length<2||2!==i||46!==s.charCodeAt(s.length-1)||46!==s.charCodeAt(s.length-2))if(s.length>2){var l=s.lastIndexOf("/");if(l!==s.length-1){-1===l?(s="",i=0):(s=s.slice(0,l),i=s.length-1-s.lastIndexOf("/")),o=r,a=0;continue}}else if(2===s.length||1===s.length){s="",i=0,o=r,a=0;continue}t&&(s.length>0?s+="/..":s="..",i=2)}else s.length>0?s+="/"+e.slice(o+1,r):s=e.slice(o+1,r),i=r-o-1;o=r,a=0}else 46===n&&-1!==a?++a:a=-1}return s}function a(e,t){var n=t.dir||t.root,s=t.base||(t.name||"")+(t.ext||"");return n?n===t.root?n+s:n+e+s:s}var r={resolve:function(){for(var e,t="",n=!1,a=arguments.length-1;a>=-1&&!n;a--){var r;a>=0?r=arguments[a]:(void 0===e&&(e=s.cwd()),r=e),i(r),0!==r.length&&(t=r+"/"+t,n=47===r.charCodeAt(0))}return t=o(t,!n),n?t.length>0?"/"+t:"/":t.length>0?t:"."},normalize:function(e){if(i(e),0===e.length)return".";var t=47===e.charCodeAt(0),n=47===e.charCodeAt(e.length-1);return e=o(e,!t),0!==e.length||t||(e="."),e.length>0&&n&&(e+="/"),t?"/"+e:e},isAbsolute:function(e){return i(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,t=0;t<arguments.length;++t){var n=arguments[t];i(n),n.length>0&&(void 0===e?e=n:e+="/"+n)}return void 0===e?".":r.normalize(e)},relative:function(e,t){if(i(e),i(t),e===t)return"";if(e=r.resolve(e),t=r.resolve(t),e===t)return"";for(var n=1;n<e.length;++n)if(47!==e.charCodeAt(n))break;for(var s=e.length,o=s-n,a=1;a<t.length;++a)if(47!==t.charCodeAt(a))break;for(var l=t.length,c=l-a,d=o<c?o:c,h=-1,u=0;u<=d;++u){if(u===d){if(c>d){if(47===t.charCodeAt(a+u))return t.slice(a+u+1);if(0===u)return t.slice(a+u)}else o>d&&(47===e.charCodeAt(n+u)?h=u:0===u&&(h=0));break}var f=e.charCodeAt(n+u),p=t.charCodeAt(a+u);if(f!==p)break;47===f&&(h=u)}var m="";for(u=n+h+1;u<=s;++u)u!==s&&47!==e.charCodeAt(u)||(0===m.length?m+="..":m+="/..");return m.length>0?m+t.slice(a+h):(a+=h,47===t.charCodeAt(a)&&++a,t.slice(a))},_makeLong:function(e){return e},dirname:function(e){if(i(e),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,s=-1,o=!0,a=e.length-1;a>=1;--a)if(t=e.charCodeAt(a),47===t){if(!o){s=a;break}}else o=!1;return-1===s?n?"/":".":n&&1===s?"//":e.slice(0,s)},basename:function(e,t){if(void 0!==t&&"string"!==typeof t)throw new TypeError('"ext" argument must be a string');i(e);var n,s=0,o=-1,a=!0;if(void 0!==t&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var r=t.length-1,l=-1;for(n=e.length-1;n>=0;--n){var c=e.charCodeAt(n);if(47===c){if(!a){s=n+1;break}}else-1===l&&(a=!1,l=n+1),r>=0&&(c===t.charCodeAt(r)?-1===--r&&(o=n):(r=-1,o=l))}return s===o?o=l:-1===o&&(o=e.length),e.slice(s,o)}for(n=e.length-1;n>=0;--n)if(47===e.charCodeAt(n)){if(!a){s=n+1;break}}else-1===o&&(a=!1,o=n+1);return-1===o?"":e.slice(s,o)},extname:function(e){i(e);for(var t=-1,n=0,s=-1,o=!0,a=0,r=e.length-1;r>=0;--r){var l=e.charCodeAt(r);if(47!==l)-1===s&&(o=!1,s=r+1),46===l?-1===t?t=r:1!==a&&(a=1):-1!==t&&(a=-1);else if(!o){n=r+1;break}}return-1===t||-1===s||0===a||1===a&&t===s-1&&t===n+1?"":e.slice(t,s)},format:function(e){if(null===e||"object"!==typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return a("/",e)},parse:function(e){i(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;var n,s=e.charCodeAt(0),o=47===s;o?(t.root="/",n=1):n=0;for(var a=-1,r=0,l=-1,c=!0,d=e.length-1,h=0;d>=n;--d)if(s=e.charCodeAt(d),47!==s)-1===l&&(c=!1,l=d+1),46===s?-1===a?a=d:1!==h&&(h=1):-1!==a&&(h=-1);else if(!c){r=d+1;break}return-1===a||-1===l||0===h||1===h&&a===l-1&&a===r+1?-1!==l&&(t.base=t.name=0===r&&o?e.slice(1,l):e.slice(r,l)):(0===r&&o?(t.name=e.slice(1,a),t.base=e.slice(1,l)):(t.name=e.slice(r,a),t.base=e.slice(r,l)),t.ext=e.slice(a,l)),r>0?t.dir=e.slice(0,r-1):o&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};r.posix=r,e.exports=r},378:function(e,t,n){n.r(t),n.d(t,{default:function(){return be}});var s=n(6252);const i={class:"p-index"};function o(e,t,n,o,a,r){const l=(0,s.up)("DefaultLayout");return(0,s.wg)(),(0,s.iD)("div",i,[(0,s.Wm)(l)])}var a=n(3577);const r={class:"l-default"},l={key:1,class:"l-default-adenoid"},c={key:1,class:"l-default-logout"};function d(e,t,n,i,o,d){const h=(0,s.up)("CommonNav"),u=(0,s.up)("CommonSidebar"),f=(0,s.up)("CommonRoute"),p=(0,s.up)("CommonHeader"),m=(0,s.up)("router-view"),g=(0,s.up)("common-content");return(0,s.wg)(),(0,s.iD)("div",r,[e.isLogin?((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[e.hasPermission?((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[(0,s.Wm)(u,null,{default:(0,s.w5)((()=>[(0,s.Wm)(h)])),_:1}),(0,s.Wm)(p,null,{default:(0,s.w5)((()=>[(0,s.Wm)(f)])),_:1}),(0,s.Wm)(g,{class:(0,a.C_)(["c-common-content",{"is-collapse":d.isCollapse}])},{default:(0,s.w5)((()=>[(0,s.Wm)(m)])),_:1},8,["class"])],64)):((0,s.wg)(),(0,s.iD)("div",l,"权限不足"))],64)):((0,s.wg)(),(0,s.iD)("div",c,"请先登录"))])}var h=n(3907);const u={class:"c-sidebar-inner"};function f(e,t,n,i,o,r){const l=(0,s.up)("svg-icon");return(0,s.wg)(),(0,s.iD)("aside",{class:(0,a.C_)(["c-sidebar",{"c-sidebar--opened":r.isCollapse,"c-sidebar--closed":!r.isCollapse,"without-bread":n.withoutBread}])},[(0,s._)("div",u,[(0,s.WI)(e.$slots,"default",{},void 0,!0)]),(0,s._)("span",{class:"c-sidebar-toggle",onClick:t[0]||(t[0]=(...e)=>r.toggleCollapse&&r.toggleCollapse(...e))},[(0,s.Wm)(l,{class:(0,a.C_)(["u-toggle-icon",{collapse:r.isCollapse}]),name:"expand",w:20,h:20},null,8,["class"])])],2)}var p={name:"CommonSidebar",props:{withoutBread:{type:Boolean,default:!0}},computed:{...(0,h.Se)({sidebar:"sidebar"}),isCollapse(){return this.sidebar.opened}},methods:{...(0,h.nv)({toggleSidebar:"app/toggleSideBar"}),toggleCollapse(){this.toggleSidebar()}}},m=n(3744);const g=(0,m.Z)(p,[["render",f],["__scopeId","data-v-36fc083e"]]);var v=g;const w={class:"c-nav"};function C(e,t,n,i,o,a){const r=(0,s.up)("nav-item"),l=(0,s.up)("el-menu"),c=(0,s.up)("el-scrollbar");return(0,s.wg)(),(0,s.iD)("div",w,[(0,s.Wm)(c,{"wrap-class":"scrollbar-wrapper"},{default:(0,s.w5)((()=>[(0,s.Wm)(l,{"default-active":a.activeMenu,"unique-opened":!1,"collapse-transition":!1,mode:"vertical"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.permissionRoutes,(e=>((0,s.wg)(),(0,s.j4)(r,{key:e.path,item:e,"base-path":e.path},null,8,["item","base-path"])))),128))])),_:1},8,["default-active"])])),_:1})])}const b={key:0};function y(e,t,n,i,o,r){const l=(0,s.up)("item"),c=(0,s.up)("el-menu-item"),d=(0,s.up)("app-link"),h=(0,s.up)("nav-item",!0),u=(0,s.up)("el-sub-menu");return n.item.hidden?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",b,[!r.hasOneShowingChild(n.item.children,n.item)||e.onlyOneChild.children&&!e.onlyOneChild.noShowingChildren||n.item.alwaysShow?((0,s.wg)(),(0,s.j4)(u,{key:1,ref:"subMenu",index:r.resolvePath(n.item.path),"popper-append-to-body":""},{title:(0,s.w5)((()=>[n.item.meta?((0,s.wg)(),(0,s.j4)(l,{key:0,icon:n.item.meta&&n.item.meta.icon,title:n.item.meta.title},null,8,["icon","title"])):(0,s.kq)("",!0)])),default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.item.children,(e=>((0,s.wg)(),(0,s.j4)(h,{key:e.path,"is-nest":!0,item:e,"base-path":r.resolvePath(e.path),class:"nest-menu"},null,8,["item","base-path"])))),128))])),_:1},8,["index"])):((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[e.onlyOneChild.meta?((0,s.wg)(),(0,s.j4)(d,{key:0,to:r.resolvePath(e.onlyOneChild.path)},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{index:r.resolvePath(e.onlyOneChild.path),class:(0,a.C_)({"submenu-title-noDropdown":!n.isNest})},{default:(0,s.w5)((()=>[(0,s.Wm)(l,{icon:e.onlyOneChild.meta.icon||n.item.meta&&n.item.meta.icon,title:e.onlyOneChild.meta.title},null,8,["icon","title"])])),_:1},8,["index","class"])])),_:1},8,["to"])):(0,s.kq)("",!0)],64))]))}var k=n(6470),_=n.n(k);function T(e){return/^(https?:|mailto:|tel:)/.test(e)}const $={class:"m-nav-item"},x={key:1};function A(e,t,n,i,o,r){const l=(0,s.up)("svg-icon");return(0,s.wg)(),(0,s.iD)("div",$,[n.icon?((0,s.wg)(),(0,s.j4)(l,{key:0,name:n.icon},null,8,["name"])):(0,s.kq)("",!0),n.title?((0,s.wg)(),(0,s.iD)("span",x,(0,a.zw)(n.title),1)):(0,s.kq)("",!0)])}var S={name:"MenuItem",props:{icon:{type:String,default:""},title:{type:String,default:""}}};const W=(0,m.Z)(S,[["render",A],["__scopeId","data-v-4689d4db"]]);var D=W;function L(e,t,n,i,o,r){return(0,s.wg)(),(0,s.j4)((0,s.LL)(r.type),(0,a.vs)((0,s.F4)(r.linkProps(n.to))),{default:(0,s.w5)((()=>[(0,s.WI)(e.$slots,"default")])),_:3},16)}var P={name:"NavLink",props:{to:{type:String,required:!0}},computed:{isExternal(){return T(this.to)},type(){return this.isExternal?"a":"router-link"}},methods:{linkProps(e){return this.isExternal?{href:e,target:"_blank",rel:"noopener"}:{to:e}}}};const V=(0,m.Z)(P,[["render",L]]);var O=V,I={name:"SidebarItem",components:{Item:D,AppLink:O},props:{item:{type:Object,required:!0},isNest:{type:Boolean,default:!1},basePath:{type:String,default:""}},data(){return this.onlyOneChild=null,{}},methods:{hasOneShowingChild(e=[],t){const n=e.filter((e=>!e.hidden&&(this.onlyOneChild=e,!0)));return 1===n.length||0===n.length&&(this.onlyOneChild={...t,path:"",noShowingChildren:!0},!0)},resolvePath(e){return T(e)?e:T(this.basePath)?this.basePath:_().resolve(this.basePath,e)}}};const j=(0,m.Z)(I,[["render",y]]);var M=j,q={name:"CommonNav",props:[],components:{NavItem:M},computed:{...(0,h.Se)(["permissionRoutes"]),activeMenu(){const e=this.$route,{meta:t,path:n}=e;return t.activeMenu?t.activeMenu:n}}};const E=(0,m.Z)(q,[["render",C]]);var Z=E;const H=e=>((0,s.dD)("data-v-5f0b4b65"),e=e(),(0,s.Cn)(),e),N={class:"c-header"},R={class:"c-header-inner"},Y={class:"c-header-logo"},B={href:"/",class:"c-header-logo-link"},K=H((()=>(0,s._)("div",{class:"c-header-nav"},null,-1)));function z(e,t,n,i,o,a){const r=(0,s.up)("svg-icon");return(0,s.wg)(),(0,s.iD)("div",N,[(0,s._)("div",R,[(0,s._)("div",Y,[(0,s._)("a",B,[(0,s.Wm)(r,{class:"c-header-logo-icon",name:"logo",w:40,h:40})])]),K]),(0,s.WI)(e.$slots,"default",{},void 0,!0)])}var F={name:"CommonHeader",props:[],components:{},data:function(){return{}},computed:{},watch:{},methods:{},created:function(){},mounted:function(){}};const J=(0,m.Z)(F,[["render",z],["__scopeId","data-v-5f0b4b65"]]);var U=J,X=n(9963);const G={id:"tags-view-container",class:"layout-navbars-tagsview layout-navbars-tagsview-shadow"},Q={class:"layout-navbars-tagsview-ul tags-style-five"},ee=["onClick","onKeypress"];function te(e,t,n,i,o,r){const l=(0,s.up)("svg-icon"),c=(0,s.up)("router-link"),d=(0,s.up)("scroll-pane");return(0,s.wg)(),(0,s.iD)("div",G,[(0,s.Wm)(d,{ref:"scrollPane",onScroll:r.handleScroll},{default:(0,s.w5)((()=>[(0,s._)("ul",Q,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.visitedViews,(e=>((0,s.wg)(),(0,s.j4)(c,{ref_for:!0,ref:"tag",key:e.path,to:{path:e.path,query:e.query,fullPath:e.fullPath},onMouseup:(0,X.iM)((t=>r.isAffix(e)?"":r.closeSelectedTag(e)),["middle"]),onContextmenu:(0,X.iM)((t=>r.openMenu(e,t)),["prevent"]),custom:""},{default:(0,s.w5)((({navigate:t})=>[(0,s._)("li",{onClick:t,onKeypress:(0,X.D2)(t,["enter"]),role:"link",class:(0,a.C_)(["layout-navbars-tagsview-ul-li",r.isActive(e)?"is-active":""])},[(0,s._)("span",null,(0,a.zw)(e.title),1),r.isAffix(e)?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(l,{key:0,class:"layout-navbars-tagsview-ul-li-icon layout-icon-three",name:"ele-Close",onClick:(0,X.iM)((t=>r.closeSelectedTag(e)),["prevent","stop"])},null,8,["onClick"]))],42,ee)])),_:2},1032,["to","onMouseup","onContextmenu"])))),128))])])),_:1},8,["onScroll"]),(0,s.wy)((0,s._)("ul",{style:(0,a.j5)({left:o.left+"px",top:o.top+"px"}),class:"contextmenu"},[(0,s._)("li",{onClick:t[0]||(t[0]=e=>r.refreshSelectedTag(o.selectedTag))},"Refresh"),r.isAffix(o.selectedTag)?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("li",{key:0,onClick:t[1]||(t[1]=e=>r.closeSelectedTag(o.selectedTag))},"Close")),(0,s._)("li",{onClick:t[2]||(t[2]=(...e)=>r.closeOthersTags&&r.closeOthersTags(...e))},"Close Others"),(0,s._)("li",{onClick:t[3]||(t[3]=e=>r.closeAllTags(o.selectedTag))},"Close All")],4),[[X.F8,o.visible]])])}function ne(e,t,n,i,o,a){const r=(0,s.up)("el-scrollbar");return(0,s.wg)(),(0,s.j4)(r,{ref:"scrollContainer",vertical:!1,class:"scroll-container",onWheel:(0,X.iM)(a.handleScroll,["prevent"])},{default:(0,s.w5)((()=>[(0,s.WI)(e.$slots,"default",{},void 0,!0)])),_:3},8,["onWheel"])}const se=4;var ie={name:"ScrollPane",computed:{scrollWrapper(){return this.$refs.scrollContainer.$refs.wrap$}},mounted(){this.scrollWrapper.addEventListener("scroll",this.emitScroll,!0)},beforeUnmount(){this.scrollWrapper.removeEventListener("scroll",this.emitScroll)},methods:{handleScroll(e){const t=e.wheelDelta||40*-e.deltaY,n=this.scrollWrapper;n.scrollLeft=n.scrollLeft+t/4},emitScroll(){this.$emit("scroll")},moveToTarget(e){const t=this.$refs.scrollContainer.$el,n=t.offsetWidth,s=this.scrollWrapper,i=this.$parent.$refs.tag;let o=null,a=null;if(i.length>0&&(o=i[0],a=i[i.length-1]),o===e)s.scrollLeft=0;else if(a===e)s.scrollLeft=s.scrollWidth-n;else{const t=i.findIndex((t=>t===e)),o=i[t-1],a=i[t+1],r=a.$el.offsetLeft+a.$el.offsetWidth+se,l=o.$el.offsetLeft-se;r>s.scrollLeft+n?s.scrollLeft=r-n:l<s.scrollLeft&&(s.scrollLeft=l)}}}};const oe=(0,m.Z)(ie,[["render",ne],["__scopeId","data-v-3f0d9b1a"]]);var ae=oe,re={name:"routeIndex",components:{ScrollPane:ae},data(){return{visible:!1,top:0,left:0,selectedTag:{},affixTags:[]}},computed:{visitedViews(){return this.$store.state.tagsView.visitedViews},routes(){return this.$store.state.permission.routes}},watch:{$route(){this.addTags(),this.moveToCurrentTag()},visible(e){e?document.body.addEventListener("click",this.closeMenu):document.body.removeEventListener("click",this.closeMenu)}},mounted(){this.initTags(),this.addTags()},methods:{isActive(e){return e.path===this.$route.path},isAffix(e){return e.meta&&e.meta.affix},filterAffixTags(e,t="/"){let n=[];return e.forEach((e=>{if(e.meta&&e.meta.affix){const s=_().resolve(t,e.path);n.push({fullPath:s,path:s,name:e.name,meta:{...e.meta}})}if(e.children){const t=this.filterAffixTags(e.children,e.path);t.length>=1&&(n=[...n,...t])}})),n},initTags(){const e=this.affixTags=this.filterAffixTags(this.routes);for(const t of e)t.name&&this.$store.dispatch("tagsView/addVisitedView",t)},addTags(){const{name:e}=this.$route;return e&&this.$store.dispatch("tagsView/addView",this.$route),!1},moveToCurrentTag(){const e=this.$refs.tag;this.$nextTick((()=>{for(const t of e)if(t.to.path===this.$route.path){this.$refs.scrollPane.moveToTarget(t),t.to.fullPath!==this.$route.fullPath&&this.$store.dispatch("tagsView/updateVisitedView",this.$route);break}}))},refreshSelectedTag(e){this.$store.dispatch("tagsView/delCachedView",e).then((()=>{const{fullPath:t}=e;this.$nextTick((()=>{this.$router.replace({path:"/redirect"+t})}))}))},closeSelectedTag(e){this.$store.dispatch("tagsView/delView",e).then((({visitedViews:t})=>{this.isActive(e)&&this.toLastView(t,e)}))},closeOthersTags(){this.$router.push(this.selectedTag),this.$store.dispatch("tagsView/delOthersViews",this.selectedTag).then((()=>{this.moveToCurrentTag()}))},closeAllTags(e){this.$store.dispatch("tagsView/delAllViews").then((({visitedViews:t})=>{this.affixTags.some((t=>t.path===e.path))||this.toLastView(t,e)}))},toLastView(e,t){const n=e.slice(-1)[0];n?this.$router.push(n.fullPath):"Dashboard"===t.name?this.$router.replace({path:"/redirect"+t.fullPath}):this.$router.push("/")},openMenu(e,t){const n=105,s=this.$el.getBoundingClientRect().left,i=this.$el.offsetWidth,o=i-n,a=t.clientX-s+15;this.left=a>o?o:a,this.top=t.clientY,this.visible=!0,this.selectedTag=e},closeMenu(){this.visible=!1},handleScroll(){this.closeMenu()}}};const le=(0,m.Z)(re,[["render",te],["__scopeId","data-v-0e9a91f8"]]);var ce=le;const de={class:"c-content"};function he(e,t,n,i,o,a){return(0,s.wg)(),(0,s.iD)("div",de,[(0,s.WI)(e.$slots,"default")])}var ue={name:"CommonContent",props:[],components:{},data:function(){return{}},computed:{},watch:{},methods:{},created:function(){},mounted:function(){}};const fe=(0,m.Z)(ue,[["render",he]]);var pe=fe,me={name:"DefaultLayout",props:[],components:{CommonSidebar:v,CommonNav:Z,CommonHeader:U,CommonRoute:ce,CommonContent:pe},data:function(){return{isLogin:!0,hasPermission:!0}},computed:{...(0,h.Se)({sidebar:"sidebar"}),isCollapse(){return this.sidebar.opened}},watch:{},methods:{},created:function(){},mounted:function(){}};const ge=(0,m.Z)(me,[["render",d],["__scopeId","data-v-e9bf8792"]]);var ve=ge,we={name:"IndexPage",props:[],data:function(){return{}},computed:{},methods:{},created:function(){},components:{DefaultLayout:ve}};const Ce=(0,m.Z)(we,[["render",o],["__scopeId","data-v-11ae581e"]]);var be=Ce}}]);
//# sourceMappingURL=378.bc71e24a.js.map